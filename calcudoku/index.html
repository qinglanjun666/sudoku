<!doctype html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script>
      (function(){
        var isLocal = location.hostname === 'localhost' || location.hostname === '127.0.0.1'
        if (isLocal) return
        var s = document.createElement('script')
        s.async = true
        s.src = 'https://www.googletagmanager.com/gtag/js?id=G-LX4B214LBK'
        document.head.appendChild(s)
        window.dataLayer = window.dataLayer || []
        function gtag(){ dataLayer.push(arguments) }
        window.gtag = gtag
        gtag('js', new Date())
        gtag('config', 'G-LX4B214LBK')
      })()
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>Calcudoku - Logic Puzzle</title>
    <meta name="description" content="Play responsive Calcudoku (Mathdoku). Logic puzzles with scalable grid sizes." />
    <link rel="stylesheet" href="../src/index.css?v=2" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <div id="site-header"></div>
    </header>
    
    <main class="main-wrap">
      <div class="container page-fit">
         <nav class="breadcrumb"><a href="/index.html">Home</a><span>></span><span class="crumb-middle">Calcudoku</span></nav>
        
        <!-- Menu Screen -->
        <div id="menu-screen">
          <div class="menu-title">Select a size:</div>
          <a href="tutorial/" style="color: #3b82f6; margin-bottom: 20px; font-size: 1.1rem; text-decoration: underline; cursor: pointer;">Calcudoku Tutorial</a>
          <div class="menu-grid" id="menu-grid">
            <!-- Injected by JS -->
          </div>
        </div>

        <!-- Game Screen (Initially Hidden) -->
        <div class="main-container" id="game-screen" style="display: none;">
          <div class="game-controls">
            <button id="back-btn" class="action-btn" style="flex: 0 0 auto; margin-right: 10px;">&larr; Back</button>
            <select id="size-selector">
              <option value="3">3x3 Grid (Easy)</option>
              <option value="4">4x4 Grid</option>
              <option value="5">5x5 Grid</option>
              <option value="6">6x6 Grid</option>
              <option value="7">7x7 Grid (Hard)</option>
              <option value="8">8x8 Grid (Expert)</option>
              <option value="9">9x9 Grid (Master)</option>
            </select>
          </div>

          <div class="board-container">
            <div id="grid" class="grid"></div>
          </div>
          
          <!-- Keypad Moved Here -->
          <div class="virtual-keypad" id="keypad">
            <!-- Injected by JS -->
          </div>
        </div>
      </div>
    </main>

    <div id="site-footer"></div>

    <script>
      // Header/Footer Injection
      (function(){
        Promise.all([
          fetch('../partials/header.html?v=' + Date.now()).then(r => r.text()),
          fetch('../partials/footer.html?v=' + Date.now()).then(r => r.text())
        ]).then(([h, f]) => {
          var sh = document.getElementById('site-header'); if (sh) sh.innerHTML = h
          var sf = document.getElementById('site-footer'); if (sf) sf.innerHTML = f
        });
      })()
    </script>
    <script src="script.js"></script>
  </body>
</html>
