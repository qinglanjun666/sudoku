<!doctype html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script>
      (function(){
        var isLocal = location.hostname === 'localhost' || location.hostname === '127.0.0.1'
        if (isLocal) return
        var s = document.createElement('script')
        s.async = true
        s.src = 'https://www.googletagmanager.com/gtag/js?id=G-LX4B214LBK'
        document.head.appendChild(s)
        window.dataLayer = window.dataLayer || []
        function gtag(){ dataLayer.push(arguments) }
        window.gtag = gtag
        gtag('js', new Date())
        gtag('config', 'G-LX4B214LBK')

      })()
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5101109858499684" crossorigin="anonymous"></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Daily Sudoku - New Logical Puzzles Every Day | LogicForSudoku.com</title>
    <meta name="description" content="Challenge your brain with our Daily Sudoku. A new, unique, and logically solvable puzzle is released every 24 hours. Track your streaks, improve your time, and master new logic techniques daily." />
    <link rel="canonical" href="/sudoku/daily/" />
    <meta name="robots" content="index, follow" />
    <meta property="og:title" content="Daily Sudoku - New Logical Puzzles Every Day | LogicForSudoku.com" />
    <meta property="og:description" content="Challenge your brain with our Daily Sudoku. A new, unique, and logically solvable puzzle is released every 24 hours. Track your streaks, improve your time, and master new logic techniques daily." />
    <meta property="og:image" content="/assets/favicon.png" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Daily Sudoku - New Logical Puzzles Every Day | LogicForSudoku.com" />
    <meta name="twitter:description" content="Challenge your brain with our Daily Sudoku. A new, unique, and logically solvable puzzle is released every 24 hours. Track your streaks, improve your time, and master new logic techniques daily." />
    <meta name="twitter:image" content="/assets/favicon.png" />
    <link rel="icon" href="/assets/favicon.png" type="image/png" />
    <link rel="stylesheet" href="/src/index.css?v=7" />
    <style>
      /* Sudoku Styles */
      :root {
        --color-bg-body: #ffffff;
        --color-btn-primary: #0072e3;
        --color-btn-hover: #005bb7;
        
        /* Sudoku Board Colors */
        --color-cell-bg: #ffffff;
        --color-cell-related: #e8f1f8; /* Bg Highlight (Peer) */
        --color-cell-same-value: #c8dced; /* Bg Same Number */
        --color-cell-selected: #b3d9ff; /* Bg Selected */
        --color-cell-error-source: #f9d7db; /* Bg Error */
        
        --color-text-given: #34495e; /* Text Primary */
        --color-text-input: #0072e3; /* Keep input blue for distinction, or use #34495e if strict */
        --color-text-error: #e74c3c; /* Text Error */
        
        --grid-line-thick: 2px solid #2c3e50; /* Border Primary */
        --grid-line-thin: 1px solid #d6e1ea; /* Border Secondary */

        /* Size Variables */
        --board-size: 600px;
        --number-size: 32px;
        --note-size: 10px;
      }

      * {
        box-sizing: border-box;
      }

      body {
        background-color: var(--color-bg-body);
        font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        color: #333;
        margin: 0;
      }

      .main-wrap {
        padding: 64px 0 40px 0;
      }

      .sudoku-container {
        max-width: 650px;
        margin: 0 auto;
        padding: 0 10px;
      }

      /* Archive View Styles */
      #daily-archive {
        max-width: 100%;
        margin: 0 auto;
        padding: 0;
        display: none; /* Hidden by default */
      }
      
      .archive-header {
        font-size: 24px;
        font-weight: bold;
        color: #333;
        margin-bottom: 20px;
        border-bottom: 1px solid #eee;
        padding-bottom: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .archive-nav-btn {
        background: none;
        border: 1px solid #ccc;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
      }
      .archive-nav-btn:hover { background: #f0f0f0; }

      .archive-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
      }
      
      @media (max-width: 600px) {
        .archive-grid {
          grid-template-columns: 1fr;
        }
      }

      .archive-link {
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: #0072e3;
        text-decoration: none;
        font-size: 16px;
        padding: 8px 0;
        border-bottom: 1px solid #f0f0f0;
      }
      
      .archive-link:hover {
        color: #005bb7;
        background-color: #f9f9f9;
        text-decoration: none;
      }
      
      .archive-link.today {
        font-weight: bold;
        color: #e74c3c;
      }

      .status-badge {
        font-size: 12px;
        padding: 2px 8px;
        border-radius: 12px;
        font-weight: 600;
      }
      
      .status-badge.completed {
        background: #dcfce7;
        color: #166534;
      }
      
      .status-badge.inprogress {
        background: #dbeafe;
        color: #1e40af;
      }

      /* Breadcrumbs removed - using global */

      /* Title Section */
      .game-title-section {
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        margin-bottom: 15px;
        margin-top: 40px;
      }

      .game-title {
        font-size: 36px;
        font-weight: 700;
        color: #2c3e50;
        margin: 0;
        display: flex;
        align-items: baseline;
        gap: 8px;
      }

      .version-tag {
        font-size: 16px;
        color: #95a5a6;
        font-weight: 400;
      }

      .size-btn {
        position: absolute;
        right: 0;
        background: #fff;
        border: 1px solid #e0e0e0;
        padding: 6px 15px;
        border-radius: 6px;
        font-size: 14px;
        color: #333;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.2s;
        box-shadow: 0 1px 2px rgba(0,0,0,0.05);
      }

      .size-btn:hover {
        background: #f8f9fa;
        border-color: #ccc;
        transform: translateY(-1px);
        box-shadow: 0 2px 4px rgba(0,0,0,0.08);
      }

      /* Top Bar */
      .sudoku-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 0 10px 0; /* Remove side padding, add bottom */
        background: transparent;
        border-bottom: none;
      }
      
      .header-left {
        display: flex;
        gap: 10px;
      }

      /* .dropdown-btn styles moved to index.css */

      .dropdown-container {
        position: relative;
      }

      .dropdown-menu {
        display: none;
        position: absolute;
        top: 110%;
        left: 0;
        z-index: 1000;
        background: #fff;
        border: 1px solid #eee;
        border-radius: 8px;
        padding: 5px 0;
        min-width: 120px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      }

      .dropdown-item {
        display: block;
        padding: 6px 15px;
        color: #333;
        text-decoration: none;
        font-size: 14px;
      }

      .dropdown-item:hover {
        background: #f5f5f5;
        color: var(--color-btn-primary);
      }
      
      .dropdown-menu.show {
        display: block;
      }

      .header-right {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .timer {
        font-family: 'Roboto Mono', monospace;
        font-size: 1.1rem;
        color: #555;
        font-weight: 500;
      }

      .icon-btn {
        background: transparent;
        color: #7f8c8d;
        border: none;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        transition: color 0.2s, background 0.2s;
      }
      
      .icon-btn:hover {
        background: #eee;
        color: #333;
      }

      /* Grid */
      .game-main {
        padding: 0;
        display: flex;
        justify-content: center;
        margin-bottom: 15px;
      }

      .sudoku-grid {
        display: grid;
        box-sizing: border-box;
        border: var(--grid-line-thick);
        background-color: var(--color-bg-body); 
        gap: 0;
        width: var(--board-size);
        max-width: 100%;
        margin: 0 auto;
        /* box-shadow removed to fix border visibility issues */
      }

      .sudoku-cell {
        aspect-ratio: 1;
        background-color: var(--color-cell-bg);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: var(--number-size);
        overflow: hidden; /* Ensure content doesn't overflow or stretch grid */
        cursor: pointer;
        user-select: none;
        border-right: var(--grid-line-thin);
        border-bottom: var(--grid-line-thin);
        position: relative;
        transition: background-color 0.05s;
        box-sizing: border-box;
      }
      
      .sudoku-cell.has-notes {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        grid-template-rows: repeat(3, 1fr);
        font-size: var(--note-size);
        color: #7f8c8d;
        padding: 2px;
      }

      /* Highlighting Classes */
      .sudoku-cell.cell-related {
        background-color: var(--color-cell-related);
      }
      
      .sudoku-cell.cell-same-value {
        background-color: var(--color-cell-same-value);
      }

      .sudoku-cell.cell-selected {
        background-color: var(--color-cell-selected) !important;
      }

      .sudoku-cell.cell-error-source {
        background-color: var(--color-cell-error-source) !important;
      }

      .sudoku-cell.val-given {
        color: var(--color-text-given);
        font-weight: 500;
      }

      .sudoku-cell.val-input {
        color: var(--color-text-input);
        font-weight: 500;
      }

      .sudoku-cell.text-error {
        color: var(--color-text-error) !important;
      }

      /* Instructions */
      .instruction-text {
        text-align: center;
        color: #999;
        margin-bottom: 10px;
        font-size: 14px;
        font-weight: 400;
      }

      /* Keypad */
      #numPad {
        display: flex !important;
        grid-template-columns: none !important;
        justify-content: center;
        gap: 10px;
        margin-bottom: 25px;
        padding: 0;
      }

      #numPad .btn {
        width: 40px;
        height: 40px;
        background: #fff;
        border: 1px solid #ccc;
        color: var(--color-btn-primary);
        font-size: 20px;
        font-weight: 500;
        border-radius: 4px; /* Square buttons */
        transition: all 0.1s;
        box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
      }
      
      #numPad .btn:hover {
        background-color: var(--color-btn-primary);
        color: #fff;
        border-color: var(--color-btn-primary);
      }

      /* Controls Row (Pencil) */
      .controls-row {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 20px;
        margin-bottom: 20px;
        font-size: 0.9rem;
        color: #666;
      }

      .pencil-check {
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
        user-select: none;
      }

      #clearNotesLink {
        color: #999;
        text-decoration: underline;
        font-size: 0.85rem;
      }
      
      #clearNotesLink:hover {
        color: #666;
      }

      /* Action Buttons */
      .action-buttons {
        padding: 0;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .btn-row {
        display: flex;
        justify-content: center;
        gap: 12px;
      }

      .action-btn {
        background: var(--color-btn-primary); /* Main color consistency */
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 500;
        flex: 1;
        max-width: 140px;
        font-size: 14px;
        transition: all 0.2s;
        box-shadow: 0 2px 4px rgba(74, 144, 226, 0.3); /* Subtle shadow matching blue */
      }

      .action-btn:hover {
        background: var(--color-btn-hover);
        box-shadow: 0 4px 8px rgba(74, 144, 226, 0.4);
        transform: translateY(-1px);
      }
      
      /* Hide old layout elements */
      .game-header, .game-side {
        display: none;
      }

      /* Modal Styles */
      /* Heatmap Styles */
        .heatmap-container {
            margin-top: 24px;
            margin-bottom: 32px;
            padding: 24px;
            background: #fff;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }
        .heatmap-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        .heatmap-title {
            font-size: 16px;
            font-weight: 600;
            color: #111;
        }
        .heatmap-count {
            font-size: 14px;
            color: #6b7280;
        }
        .heatmap-scroll {
            overflow-x: auto;
            padding-bottom: 8px;
        }
        .heatmap-wrapper {
            display: flex;
            align-items: flex-start;
            gap: 4px;
        }
        .heatmap-days {
            display: grid;
            grid-template-rows: repeat(7, 12px);
            gap: 3px;
            margin-top: 20px; /* Align with grid below months */
        }
        .heatmap-day {
            font-size: 10px;
            line-height: 12px;
            color: #6b7280;
            text-align: right;
            height: 12px;
            padding-right: 4px;
        }
        .heatmap-content {
            display: flex;
            flex-direction: column;
        }
        .heatmap-months {
            position: relative;
            height: 20px;
            margin-bottom: 0;
        }
        .heatmap-month {
            position: absolute;
            font-size: 10px;
            color: #6b7280;
            top: 0;
            line-height: 12px;
        }
        .heatmap-grid {
            display: grid;
            grid-template-rows: repeat(7, 12px);
            grid-auto-flow: column;
            gap: 3px;
            width: max-content;
        }
        .heatmap-cell {
            width: 12px;
            height: 12px;
            background: #ebedf0;
            border-radius: 2px;
            position: relative;
        }
        .heatmap-cell.active {
            background: #40c463;
        }
        .heatmap-cell.active-high {
            background: #166534; /* Dark Green */
        }
        .heatmap-cell:hover::after {
            content: attr(data-date);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #000;
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            pointer-events: none;
            z-index: 10;
            margin-bottom: 4px;
        }
        .heatmap-legend {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 4px;
            margin-top: 8px;
            font-size: 12px;
            color: #6b7280;
        }
        .heatmap-legend-cell {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }
        .heatmap-inner {
            display: flex;
            flex-direction: column;
            width: max-content;
        }
        .year-select {
            padding: 2px 8px;
            border: 1px solid #e5e7eb;
            border-radius: 6px;
            font-size: 14px;
            color: #374151;
            background-color: #fff;
            cursor: pointer;
        }
        .year-select:focus {
            outline: none;
            border-color: #40c463;
        }
        .heatmap-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2000;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s;
      }

      .modal-overlay.show {
        opacity: 1;
        pointer-events: auto;
      }

      .modal-content {
        background: #fff;
        width: 400px;
        max-width: 90%;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        overflow: hidden;
        animation: slideIn 0.2s ease-out;
      }

      @keyframes slideIn {
        from { transform: translateY(-20px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
      }

      .modal-header {
        padding: 15px 20px;
        border-bottom: 1px solid #eee;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .modal-header h2 {
        margin: 0;
        font-size: 18px;
        color: #333;
      }

      .close-btn {
        background: none;
        border: 1px solid #333;
        font-size: 20px;
        cursor: pointer;
        color: #333;
        padding: 0;
        width: 24px;
        height: 24px;
        line-height: 22px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 2px;
      }
      
      .close-btn:hover {
        background: #eee;
      }

      .modal-body {
        padding: 20px;
      }

      .setting-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .setting-row:last-child {
        margin-bottom: 0;
      }

      .setting-row label {
        font-weight: 600;
        font-size: 14px;
        color: #333;
      }

      .radio-group {
        display: flex;
        gap: 15px;
      }

      .radio-group label {
        font-weight: 400;
        color: #555;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
      }
      
      input[type="radio"] {
        accent-color: var(--color-btn-primary);
        transform: scale(1.1);
      }

      .modal-footer {
        padding: 15px 20px;
        border-top: 1px solid #eee;
        display: flex;
        justify-content: flex-end;
        gap: 10px;
      }

      .btn-save {
        background: #105995;
        color: #fff;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 600;
        font-size: 14px;
      }

      .btn-save:hover {
        background: #0d4a7d;
      }

      .btn-cancel {
        background: #6a4c82; /* Dark purple from image */
        color: #fff;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 600;
        font-size: 14px;
      }

      .btn-cancel:hover {
        background: #553d68;
      }

      /* Tutorial/About Section Styles */
      .tutorial-section {
        margin-top: 50px;
        padding-top: 30px;
        border-top: 1px solid #eee;
        color: #333;
      }

      .tutorial-title {
        font-size: 24px;
        font-weight: 700;
        margin-bottom: 20px;
        color: #2c3e50;
      }

      .tutorial-card {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        border-left: 4px solid var(--color-btn-primary);
      }

      .card-title {
        font-size: 18px;
        font-weight: 600;
        margin-top: 0;
        margin-bottom: 10px;
        color: #2c3e50;
      }

      .card-text {
        font-size: 15px;
        line-height: 1.6;
        color: #555;
        margin: 0;
      }

    </style>
  </head>
  <body>
    <header>
      <div id="site-header"></div>
    </header>
    <main class="main-wrap">
      <div class="container page-fit">
        <nav class="breadcrumb"><a href="/index.html">Home</a><span>></span><a href="/sudoku/index.html">Sudoku</a><span>></span><span class="crumb-middle">Daily Challenge</span></nav>
        
        <!-- Archive View -->
        <div id="daily-archive">
           <div class="heatmap-container">
            <div class="heatmap-scroll">
                <div class="heatmap-inner">
                    <div class="heatmap-header">
                        <div class="heatmap-title">
                            Daily Challenge Activity
                        </div>
                        <div class="heatmap-controls">
                            <div class="heatmap-count" id="heatmapCount">Loading...</div>
                            <select id="yearSelect" class="year-select" onchange="renderHeatmap(this.value)">
                                <option value="2025" selected>2025</option>
                                <option value="2026">2026</option>
                            </select>
                        </div>
                    </div>
                    <div class="heatmap-wrapper">
                        <div class="heatmap-days">
                            <div class="heatmap-day"></div> <!-- Sun -->
                            <div class="heatmap-day">Mon</div>
                            <div class="heatmap-day">Tue</div>
                            <div class="heatmap-day">Wed</div>
                            <div class="heatmap-day">Thu</div>
                            <div class="heatmap-day">Fri</div>
                            <div class="heatmap-day"></div> <!-- Sat -->
                        </div>
                        <div class="heatmap-content">
                            <div class="heatmap-months" id="heatmapMonths"></div>
                            <div class="heatmap-grid" id="heatmapGrid"></div>
                        </div>
                    </div>
                    <div class="heatmap-legend">
                        <span>Incomplete</span>
                        <div class="heatmap-legend-cell" style="background: #ebedf0"></div>
                        <div class="heatmap-legend-cell" style="background: #40c463"></div>
                        <span>Completed</span>
                        <div class="heatmap-legend-cell" style="background: #166534"></div>
                        <span>More</span>
                    </div>
                </div>
            </div>
           </div>

           <div class="archive-header">
             <span id="archiveMonthName">Month Year</span>
             <div>
               <button class="archive-nav-btn" id="prevMonthBtn">&lt; Prev</button>
               <button class="archive-nav-btn" id="nextMonthBtn">Next &gt;</button>
             </div>
           </div>
           <div class="archive-grid" id="archiveGrid">
             <!-- Links generated by JS -->
           </div>
        </div>

        <!-- Game View -->
        <div id="daily-game-container" class="sudoku-container" style="display:none;">
          <!-- Title Section -->
          <div class="game-title-section" style="display:flex; flex-direction:column; align-items:center; justify-content:center; gap:5px; margin-top:40px; margin-bottom:15px; position:relative;">
            <h1 class="game-title" style="margin:0; font-size:36px; line-height:1.2;">Daily Challenge</h1>
            <div id="game-subtitle" style="font-size:14px; font-weight:500; color:#333;"></div>
            <button class="size-btn" onclick="toggleSizeModal(true)" style="position:absolute; right:0; top:0;">Size</button>
          </div>
          
          <div id="dailyCalendar" class="calendar-container" style="display:none;"></div>

          <!-- Top Bar -->
          <div class="sudoku-header">
            <div class="header-left">
              <div class="dropdown-container" id="difficultyDropdown">
                <button class="dropdown-btn" onclick="toggleDropdown()">Medium <span class="arrow">▼</span></button>
                <div class="dropdown-menu" id="difficultyMenu">
                  <a href="?difficulty=easy" class="dropdown-item">Easy</a>
                  <a href="?difficulty=medium" class="dropdown-item">Medium</a>
                  <a href="?difficulty=hard" class="dropdown-item">Hard</a>
                  <a href="?difficulty=six" class="dropdown-item">6x6</a>
                </div>
              </div>
              <button id="newPuzzle" class="dropdown-btn">New Game</button>
              <a href="?view=archive" class="dropdown-btn" style="text-decoration:none;">Calendar</a>
            </div>
            <div class="header-right timer-container">
              <div class="timer-left">
                <svg class="timer-icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                <div id="timerDisplay" class="timer-val">00:00:00</div>
              </div>
              <div class="timer-divider"></div>
              <div class="timer-controls">
                <button class="timer-btn" id="toggleTimerBtn" title="Toggle Timer"></button>
                <button class="timer-btn" id="resetBtn" title="Restart">
                   <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
                </button>
              </div>
            </div>
          </div>

          <!-- Grid -->
          <div class="game-main">
            <div class="sudoku-grid" id="grid"></div>
          </div>

          <!-- Instructions -->
          <p class="instruction-text">Complete the Daily Challenge!</p>

          <!-- Keypad -->
          <div id="numPad"></div>

          <!-- Action Buttons -->
          <div class="action-buttons">
            <div class="btn-row">
              <button id="undoBtn" class="action-btn">Undo</button>
              <button id="notesBtn" class="action-btn">Notes</button>
              <button id="hintBtn" class="action-btn">Hint</button>
              <button id="showSolutionBtn" class="action-btn">Show Solution</button>
              <button id="resetActionBtn" class="action-btn">Reset</button>
            </div>
          </div>

          <!-- About Daily Sudoku Section -->
          <section class="tutorial-section">
            <h2 class="tutorial-title">About Daily Sudoku</h2>
            
            <div class="tutorial-card">
              <h3 class="card-title">Why Play Daily Sudoku?</h3>
              <p class="card-text">
                Practicing Sudoku daily is more than just a pastime; it’s a workout for your brain. Consistency is key to mastering logical deduction. By solving our daily grid, you develop a "solver's intuition," helping you spot complex patterns like Hidden Quads or Swordfish faster over time. Our daily puzzles are hand-picked to ensure they have a unique solution reachable through pure logic—no guessing required.
              </p>
            </div>

            <div class="tutorial-card">
              <h3 class="card-title">Streaks & Competition</h3>
              <p class="card-text">
                <strong>Track Your Progress</strong> On LogicForSudoku, we believe in growth. Every daily puzzle comes with a global leaderboard. Compare your solving speed with enthusiasts worldwide and build your Daily Streak. Can you solve 7 days in a row without using a single hint? Whether you are a beginner or a Sudoku Grandmaster, our daily challenge provides the perfect mental reset.
              </p>
            </div>
        </div>

      </div>
    </main>
    <div id="site-footer"></div>

    <!-- Size Modal -->
    <div id="sizeModal" class="modal-overlay">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Size Settings</h2>
          <button class="close-btn" onclick="toggleSizeModal(false)">×</button>
        </div>
        <div class="modal-body">
          <div class="setting-row">
            <label>Board</label>
            <div class="radio-group">
              <label><input type="radio" name="boardSize" value="small"> Small</label>
              <label><input type="radio" name="boardSize" value="medium"> Medium</label>
              <label><input type="radio" name="boardSize" value="large" checked> Large</label>
            </div>
          </div>
          <div class="setting-row">
            <label>Numbers</label>
            <div class="radio-group">
              <label><input type="radio" name="numSize" value="small"> Small</label>
              <label><input type="radio" name="numSize" value="medium" checked> Medium</label>
              <label><input type="radio" name="numSize" value="large"> Large</label>
            </div>
          </div>
          <div class="setting-row">
            <label>Possibility Numbers</label>
            <div class="radio-group">
              <label><input type="radio" name="noteSize" value="small" checked> Small</label>
              <label><input type="radio" name="noteSize" value="medium"> Medium</label>
              <label><input type="radio" name="noteSize" value="large"> Large</label>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-save" onclick="saveSizeSettings()">Save settings</button>
          <button class="btn-cancel" onclick="toggleSizeModal(false)">Cancel</button>
        </div>
      </div>
    </div>

    <script>
      // The game.js will handle parsing URL parameters to set the difficulty and seed.
      // We just need to ensure the script runs.
      const diff = 'daily'; // Hint to game.js
    </script>
    <script src="/src/layout.js"></script>
    <script src="/src/game.js?v=11"></script>
    <script src="/src/records.js"></script>
    <script>
      function toggleDropdown() {
        const menu = document.getElementById('difficultyMenu');
        menu.classList.toggle('show');
      }
      
      // Close dropdown when clicking outside
      window.onclick = function(event) {
        if (!event.target.matches('.dropdown-btn')) {
          var dropdowns = document.getElementsByClassName("dropdown-menu");
          for (var i = 0; i < dropdowns.length; i++) {
            var openDropdown = dropdowns[i];
            if (openDropdown.classList.contains('show')) {
              openDropdown.classList.remove('show');
            }
          }
        }
      }

      function toggleSizeModal(show) {
        const modal = document.getElementById('sizeModal');
        if (show) modal.classList.add('show');
        else modal.classList.remove('show');
      }

      function changeDifficulty(diff) {
        const url = new URL(window.location);
        url.searchParams.set('difficulty', diff);
        window.location.href = url.toString();
      }
      
      function saveSizeSettings() {
        const boardSize = document.querySelector('input[name="boardSize"]:checked').value;
        const numSize = document.querySelector('input[name="numSize"]:checked').value;
        const noteSize = document.querySelector('input[name="noteSize"]:checked').value;
        
        // Save to localStorage
        localStorage.setItem('sudoku-size-board', boardSize);
        localStorage.setItem('sudoku-size-num', numSize);
        localStorage.setItem('sudoku-size-note', noteSize);

        // Trigger update in game.js (dispatch event)
        window.dispatchEvent(new Event('sudoku-size-change'));
        
        toggleSizeModal(false);
      }
      
      // Initialize radios
      (function(){
        const bs = localStorage.getItem('sudoku-size-board') || 'large';
        const ns = localStorage.getItem('sudoku-size-num') || 'medium';
        const nts = localStorage.getItem('sudoku-size-note') || 'small';
        
        const rb = document.querySelector(`input[name="boardSize"][value="${bs}"]`);
        if (rb) rb.checked = true;
        const rn = document.querySelector(`input[name="numSize"][value="${ns}"]`);
        if (rn) rn.checked = true;
        const rnt = document.querySelector(`input[name="noteSize"][value="${nts}"]`);
        if (rnt) rnt.checked = true;
      })();
    </script>

    <script>
      // Archive View Logic
      (function() {
        // Expose renderHeatmap globally
        window.renderHeatmap = function(year = 2025) {
            year = parseInt(year);
            const container = document.getElementById('heatmapGrid');
            const monthsContainer = document.getElementById('heatmapMonths');
            const countEl = document.getElementById('heatmapCount');
            
            if (!container || !monthsContainer) return;

            if (year === 2026) {
                container.innerHTML = '<div style="padding: 20px; font-size: 14px; color: #666;">Coming next year</div>';
                monthsContainer.innerHTML = '';
                countEl.textContent = `0 contributions in the 2026`;
                container.style.display = 'block';
                container.style.gridTemplateRows = 'none';
                container.style.width = '100%';
                return;
            } else {
                container.style.display = 'grid';
                container.style.gridTemplateRows = 'repeat(7, 12px)';
                container.style.width = 'max-content';
            }
            
            const history = JSON.parse(localStorage.getItem('sudoku_daily_history') || '[]');
            const historySet = new Set(history);
            const dailyCounts = JSON.parse(localStorage.getItem('sudoku_daily_counts') || '{}');
            
            const startDate = new Date(year, 0, 1); // Jan 1
            const gridStartDate = new Date(startDate);
            while (gridStartDate.getDay() !== 0) {
                gridStartDate.setDate(gridStartDate.getDate() - 1);
            }
            
            let html = '';
            let monthsHtml = '';
            let currentDate = new Date(gridStartDate);
            
            const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
            let lastMonth = -1;

            let totalContributions = 0;

            for (let w = 0; w < 53; w++) {
                const currentMonth = currentDate.getMonth();
                const currentYear = currentDate.getFullYear();
                
                if (currentMonth !== lastMonth && currentYear === year) {
                    monthsHtml += `<div class="heatmap-month" style="left: ${w * 15}px">${monthNames[currentMonth]}</div>`;
                    lastMonth = currentMonth;
                }

                for (let d = 0; d < 7; d++) {
                    const dateStr = currentDate.toISOString().split('T')[0];
                    const count = dailyCounts[dateStr] || 0;
                    const isActive = historySet.has(dateStr); 
                    
                    if (currentDate.getFullYear() === year) {
                        if (count > 0 || isActive) totalContributions += (count || 1);
                    }

                    let colorClass = '';
                    if (count > 3) colorClass = 'active-high';
                    else if (count > 0 || isActive) colorClass = 'active';
                    
                    html += `<div class="heatmap-cell ${colorClass}" data-date="${dateStr}"></div>`;
                    
                    currentDate.setDate(currentDate.getDate() + 1);
                }
            }
            
            container.innerHTML = html;
            monthsContainer.innerHTML = monthsHtml;
            countEl.textContent = `${totalContributions} contributions in the ${year}`;
        }

        const archiveContainer = document.getElementById('daily-archive');
        const gameContainer = document.getElementById('daily-game-container');
        const archiveGrid = document.getElementById('archiveGrid');
        const monthLabel = document.getElementById('archiveMonthName');
        
        let currentArchiveDate = new Date();
        
        function renderArchive(date) {
            const year = date.getFullYear();
            const month = date.getMonth();
            const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            
            if(monthLabel) monthLabel.textContent = monthNames[month] + " " + year;
            
            // Generate all days in month
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            let html = '';
            
            const today = new Date();
            const isCurrentMonth = today.getFullYear() === year && today.getMonth() === month;
            
            for (let d = 1; d <= daysInMonth; d++) {
                const dayDate = new Date(year, month, d);
                // Format: DayName, MonthName DD, YYYY
                const dayName = dayDate.toLocaleDateString('en-US', { weekday: 'short' });
                const monthShort = dayDate.toLocaleDateString('en-US', { month: 'short' });
                const dStr = d.toString().padStart(2, '0');
                const mStr = (month+1).toString().padStart(2, '0');
                const fullYear = year;
                
                const linkText = `${dayName}, ${monthShort} ${dStr}, ${fullYear}`;
                // Link format: ?date=YYYY-MM-DD
                const dateParam = `${fullYear}-${mStr}-${dStr}`;
                const linkHref = `?date=${dateParam}`;
                
                let className = 'archive-link';
                if (isCurrentMonth && d === today.getDate()) {
                    className += ' today';
                }
                
                html += `<a href="${linkHref}" class="${className}">${linkText}</a>`;
            }
            if(archiveGrid) archiveGrid.innerHTML = html;
        }
        
        const prevBtn = document.getElementById('prevMonthBtn');
        if(prevBtn) prevBtn.addEventListener('click', () => {
            currentArchiveDate.setMonth(currentArchiveDate.getMonth() - 1);
            renderArchive(currentArchiveDate);
        });
        
        const nextBtn = document.getElementById('nextMonthBtn');
        if(nextBtn) nextBtn.addEventListener('click', () => {
            currentArchiveDate.setMonth(currentArchiveDate.getMonth() + 1);
            renderArchive(currentArchiveDate);
        });
        
        // Determine View Mode
        const params = new URLSearchParams(location.search);
        const viewParam = params.get('view');
        
        if (viewParam === 'archive') {
            // Archive Mode
            if(gameContainer) gameContainer.style.display = 'none';
            if(archiveContainer) archiveContainer.style.display = 'block';
            renderArchive(currentArchiveDate);
            // Render Heatmap if in archive mode
            if(window.renderHeatmap) window.renderHeatmap(2025);
        } else {
            // Game Mode (Default)
            if(gameContainer) gameContainer.style.display = 'block';
            if(archiveContainer) archiveContainer.style.display = 'none';
        }
      })();
    </script>
  </body>
</html>